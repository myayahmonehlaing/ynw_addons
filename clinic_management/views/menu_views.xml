<odoo>
    <!-- Root Menu -->
    <menuitem id="menu_clinic_root"
              name="Clinic"
              sequence="10"
              web_icon="clinic_management,static/description/icon.png" action="action_clinic_patient"/>

    <!-- Product Action -->
    <record id="action_clinic_product" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
    </record>

    <!-- ✅ Treatment Invoices Action -->
    <record id="action_clinic_invoice" model="ir.actions.act_window">
        <field name="name">Treatment Invoices</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('move_type', '=', 'out_invoice')]</field>
        <field name="context">{'default_move_type': 'out_invoice'}</field>
    </record>


    <!-- Doctor Action -->
    <record id="action_clinic_doctor" model="ir.actions.act_window">
        <field name="name">Doctors</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('is_doctor_position', '=', True)]</field>
        <field name="context">{'search_default_is_doctor': 1}</field>
    </record>

    <!-- Submenu: Clinic -->
    <menuitem id="menu_clinic_main" name="Clinic" parent="menu_clinic_root" sequence="1"/>
    <menuitem id="menu_clinic_patient" name="Patients" parent="menu_clinic_main" action="action_clinic_patient"
              groups="clinic_management.group_clinic_manager,clinic_management.group_clinic_doctor,clinic_management.group_clinic_receptionist"/>
    <menuitem id="menu_clinic_appointment" name="Appointments" parent="menu_clinic_main"
              action="action_clinic_appointment"
              groups="clinic_management.group_clinic_manager,clinic_management.group_clinic_doctor,clinic_management.group_clinic_receptionist"/>

    <!-- Submenu: Treatment -->
    <menuitem id="menu_clinic_treatment" name="Treatments" parent="menu_clinic_root"
              action="action_clinic_treatment" sequence="2"/>

    <!-- All Products (default Odoo action) -->
    <record id="action_clinic_all_products" model="ir.actions.act_window">
        <field name="name">Products</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
    </record>

    <!-- Clinic Treatment Products -->
    <record id="action_clinic_treatment_products" model="ir.actions.act_window">
        <field name="name">Treatment</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('categ_id.complete_name', '=', 'Treatment')]</field>
    </record>

    <!-- Clinic Ingredients Products -->
    <record id="action_clinic_ingredient_products" model="ir.actions.act_window">
        <field name="name">Topical Medicine</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('categ_id.complete_name', '=', 'Topical Medicine')]</field>
    </record>

    <record id="action_clinic_service_products" model="ir.actions.act_window">
        <field name="name">Oral Medicine</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('categ_id.complete_name', '=', 'Oral Medicine')]</field>
    </record>

    <!-- Appointment Analysis Pivot -->
    <record id="action_clinic_appointment_analysis" model="ir.actions.act_window">
        <field name="name">Appointment Analysis</field>
        <field name="res_model">clinic.appointment</field>
        <field name="view_mode">graph,pivot</field>
        <field name="search_view_id" ref="clinic_management.view_clinic_appointment_search"/>
        <field name="context">{'search_default_group_by_state': 1}</field>
        <!--        <field name="context">{}</field>-->
        <!--        <field name="help" type="html">-->
        <!--            <p class="o_view_nocontent_smiling_face">No appointment data available.</p>-->
        <!--        </field>-->
    </record>

    <!-- Treatment Analysis Pivot -->
    <record id="action_clinic_treatment_analysis" model="ir.actions.act_window">
        <field name="name">Treatment Analysis</field>
        <field name="res_model">clinic.treatment</field>
        <field name="view_mode">graph,pivot</field>
        <!--        <field name="context">{}</field>-->
        <!--        <field name="help" type="html">-->
        <!--            <p class="o_view_nocontent_smiling_face">No treatment data available.</p>-->
        <!--        </field>-->
        <field name="search_view_id" ref="clinic_management.view_clinic_treatment_search"/>
        <field name="context">{'search_default_group_by_state': 1}</field>
    </record>

    <!-- Treatment Details Analysis Pivot -->
<!--    <record id="action_clinic_treatment_detail_analysis" model="ir.actions.act_window">-->
<!--    <field name="name">Treatment Detail Analysis</field>-->
<!--    <field name="res_model">clinic.treatment.line</field>-->
<!--    <field name="view_mode">pivot,graph</field>-->
<!--    <field name="context">-->
<!--        {-->
<!--            "search_default_group_by_category_id": 1,-->
<!--            "search_default_group_by_product_id": 1-->
<!--        }-->
<!--    </field>-->
<!--</record>-->



    <!-- Doctor Analysis -->
    <record id="action_clinic_doctor_analysis" model="ir.actions.act_window">
        <field name="name">Doctor Analysis</field>
        <field name="res_model">clinic.appointment</field>
        <field name="view_mode">graph,pivot</field>
        <field name="search_view_id" ref="clinic_management.view_clinic_appointment_search"/>
        <field name="context">{'search_default_group_by_doctor_id': 1}</field>
    </record>


    <!-- Patient Analysis -->
    <record id="action_clinic_patient_analysis" model="ir.actions.act_window">
        <field name="name">Patient Analysis</field>
        <field name="res_model">clinic.appointment</field>
        <field name="view_mode">graph,pivot</field>
        <field name="search_view_id" ref="clinic_management.view_clinic_appointment_search"/>
        <field name="context">{'search_default_group_by_patient_id': 1}</field>
    </record>


    <!-- Submenu: Product -->
    <menuitem id="menu_clinic_product" name="Products" parent="menu_clinic_root" action="action_clinic_product"
              sequence="3" groups="clinic_management.group_clinic_manager"/>
    <menuitem id="menu_clinic_product_all" name="Products" parent="menu_clinic_product"
              action="action_clinic_all_products" sequence="1" groups="clinic_management.group_clinic_manager"/>
    <menuitem id="menu_clinic_product_treatment" name="Treatment"
              parent="menu_clinic_product" action="action_clinic_treatment_products" sequence="2"
              groups="clinic_management.group_clinic_manager"/>
    <menuitem id="menu_clinic_product_ingredient" name="Topical Medicine"
              parent="menu_clinic_product" action="action_clinic_ingredient_products" sequence="3"
              groups="clinic_management.group_clinic_manager"/>
    <menuitem id="menu_clinic_product_service" name="Oral Medicine"
              parent="menu_clinic_product" action="action_clinic_service_products" sequence="4"
              groups="clinic_management.group_clinic_manager"/>

    <!-- Submenu: Invoice -->
    <menuitem id="menu_clinic_invoice"
              name="Invoice"
              parent="menu_clinic_root"
              sequence="4"
              groups="clinic_management.group_clinic_manager,clinic_management.group_clinic_accountant"/>

    <!-- Use the new action for treatment invoices -->
    <menuitem id="menu_clinic_invoice_move"
              name="Invoices"
              parent="menu_clinic_invoice"
              action="action_clinic_invoice"
              groups="clinic_management.group_clinic_manager,clinic_management.group_clinic_accountant"/>

    <!-- ✅ Reporting Section -->
    <menuitem id="menu_clinic_reporting"
              name="Reporting"
              parent="menu_clinic_root"
              sequence="6" groups="clinic_management.group_clinic_manager"/>

    <menuitem id="menu_clinic_reporting_appointment"
              name="Appointment Analysis"
              parent="menu_clinic_reporting"
              action="action_clinic_appointment_analysis"
              sequence="3" groups="clinic_management.group_clinic_manager"/>

    <menuitem id="menu_clinic_reporting_treatment"
              name="Treatment Analysis"
              parent="menu_clinic_reporting"
              action="action_clinic_treatment_analysis"
              sequence="4" groups="clinic_management.group_clinic_manager"/>

    <menuitem id="menu_clinic_reporting_doctor"
              name="Doctor Analysis"
              parent="menu_clinic_reporting"
              action="action_clinic_doctor_analysis"
              sequence="1" groups="clinic_management.group_clinic_manager"/>

    <menuitem id="menu_clinic_reporting_patient"
              name="Patient Analysis"
              parent="menu_clinic_reporting"
              action="action_clinic_patient_analysis"
              sequence="2" groups="clinic_management.group_clinic_manager"/>


    <!-- Submenu: Configuration -->
    <menuitem id="menu_clinic_config" name="Configuration" parent="menu_clinic_root" sequence="6"/>
    <menuitem id="menu_clinic_doctors" name="Doctors"
              parent="menu_clinic_config" action="action_clinic_doctor"
              groups="clinic_management.group_clinic_manager,clinic_management.group_clinic_doctor,clinic_management.group_clinic_receptionist"/>
    <menuitem id="menu_clinic_room" name="Rooms" parent="menu_clinic_config" action="action_clinic_room"/>
</odoo>
